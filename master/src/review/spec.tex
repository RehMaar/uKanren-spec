{\bf Специализация программ} --- это метод автоматической оптимизации программ,
при которой из программы удаляются избыточные вычисления, зависимые от частично известного входа.
Специализацию программ также называют \emph{частичными} или \emph{смешанными вычислениями}\cite{jones}.

{\it Специализатор} $\text{spec}_L$ языка $L$ принимает на вход программу $p_L$ и часть известного входа этой
программы $i_s$ (\emph{статических} данных) и генерирует новую программу $\hat{p}_L$, которая ведёт себя на оставшемся
входе $i_d$ (\emph{динамических} данных) также, как и оригинальная программа (формула~\ref{eq:spec}).

\begin{equation}
  \llbracket \text{spec}_L(p_L, i_s) \rrbracket (i_d) \equiv \hat{p}_L (i_d) \equiv \llbracket p_L \rrbracket (i_s, i_d)
\label{eq:spec}
\end{equation}

% Эффекты специализаторов
Специализатор производит все вычисления, зависимые от статических данных,
протягивание констант, инлайнгинг и другие.


Одно из интересных теоретических применений специализации --- это \emph{проекции Футамуры}\cite{futamura}.
Процесс специализации интерпретатора на программу на языке $L$ $\text{spec}_L(\text{eval}_L, p_L)$
порождает \emph{скомплированную} программу $\hat{p}_L$, а процесс специализации специализатора
на интерпретатор языка $L$ $\text{spec}_{L''}(\text{spec}_{L'}, \text{eval}_L)$, в свою очередь,
порождает \emph{компилятор}. Это первая и вторая проекции Футамуры соответственно.\todo{Как-то привязать это}


Специализация разделяется на два больших класса: \emph{online} и \emph{offline} алгоритмы:
\begin{itemize}
\item offline-cпециализаторы --- это двухфазовые алгоритмы специализации, в первой фазе
которого происходит разметка исхного кода, к примеру, с помощью анализа времени связывания\todo{cite},
и во второй фазе --- непосредственно во время специализации --- на основе полученной
разметки принимаются решения об оптимизации;
\item online-специализаторы, напротив, принимают решения о специализации на лету.
\end{itemize}

\todo{про то, какие специализаторы когда выгоднее применять (Jones, 147 page)}
\todo{Примеры}

{\bf Частичная дедукция} --- класс методов специализации логический языков\cite{advanced}.
В работе~\cite{lozov} представляется адаптация конъюнктивной частичной дедукции для miniKanren.
\todo{реализация вот это делает хорошо, а вон то --- плохо}.

Как будет показано в разделе~\ref{testing}, \cpd нестабильно даёт хорошие результаты и
может сильно затормозить исполнение программы.
